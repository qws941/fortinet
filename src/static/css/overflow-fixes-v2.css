/**
 * UI Overflow Fixes v2.0
 * 포괄적인 오버플로우 처리 및 반응형 최적화
 * Date: 2025-08-17
 */

/* ==============================================
   1. 전역 오버플로우 방지
   ============================================== */

/* 기본 박스 모델 설정 */
* {
    box-sizing: border-box;
}

/* HTML/Body 오버플로우 제어 */
html {
    overflow-x: hidden;
    overflow-y: auto;
}

body {
    overflow-x: hidden;
    min-width: 320px;
    word-wrap: break-word;
    word-break: break-word;
}

/* 메인 컨테이너 */
.container,
.container-fluid,
.main-content,
.content-wrapper {
    overflow-x: hidden;
    width: 100%;
    max-width: 100%;
}

/* ==============================================
   2. 테이블 오버플로우 처리
   ============================================== */

/* 반응형 테이블 래퍼 */
.table-responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    margin-bottom: 1rem;
}

/* 테이블 기본 설정 */
table {
    width: 100%;
    max-width: 100%;
    table-layout: fixed;
}

/* 테이블 셀 오버플로우 */
table td,
table th {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    padding: 0.5rem;
}

/* 긴 텍스트 셀 처리 */
.table-cell-long {
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* 테이블 컬럼 너비 클래스 */
.col-w-50 { width: 50px; max-width: 50px; }
.col-w-100 { width: 100px; max-width: 100px; }
.col-w-150 { width: 150px; max-width: 150px; }
.col-w-200 { width: 200px; max-width: 200px; }
.col-w-250 { width: 250px; max-width: 250px; }
.col-w-auto { width: auto; }

/* ==============================================
   3. 카드 컴포넌트 오버플로우
   ============================================== */

.card {
    overflow: hidden;
    word-wrap: break-word;
}

.card-header,
.card-body,
.card-footer {
    overflow: hidden;
}

.card-title {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
}

.card-text {
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: auto;
}

/* ==============================================
   4. 네비게이션 오버플로우
   ============================================== */

.navbar {
    overflow: visible; /* 드롭다운 메뉴를 위해 */
}

.navbar-nav {
    flex-wrap: wrap;
}

.nav-link {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 200px;
}

/* 사이드바 */
.sidebar {
    overflow-y: auto;
    overflow-x: hidden;
    max-height: 100vh;
}

/* ==============================================
   5. 폼 요소 오버플로우
   ============================================== */

input,
textarea,
select {
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
}

.form-control {
    width: 100%;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Textarea 자동 높이 조절 */
textarea.auto-resize {
    overflow-y: hidden;
    resize: vertical;
    min-height: 2.5rem;
    max-height: 20rem;
}

/* ==============================================
   6. 버튼 오버플로우
   ============================================== */

.btn {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
}

.btn-group {
    flex-wrap: wrap;
}

/* ==============================================
   7. 모달 오버플로우
   ============================================== */

.modal-dialog {
    max-width: 90vw;
    margin: 1.75rem auto;
}

.modal-content {
    max-height: 90vh;
    overflow: hidden;
}

.modal-body {
    overflow-y: auto;
    max-height: calc(90vh - 120px);
}

/* ==============================================
   8. 코드 블록 오버플로우
   ============================================== */

pre,
code {
    overflow-x: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
    max-width: 100%;
}

.code-block {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    background: #f4f4f4;
    padding: 1rem;
    border-radius: 4px;
}

/* ==============================================
   9. 리스트 오버플로우
   ============================================== */

.list-group-item {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.list-group-item.expanded {
    white-space: normal;
    overflow: visible;
}

/* ==============================================
   10. 이미지 반응형 처리
   ============================================== */

img {
    max-width: 100%;
    height: auto;
}

.img-container {
    overflow: hidden;
    position: relative;
}

/* ==============================================
   11. 유틸리티 클래스
   ============================================== */

/* 텍스트 줄임 */
.text-truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* 멀티라인 줄임 */
.text-truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.text-truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* 스크롤 가능 영역 */
.scrollable-x {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.scrollable-y {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    max-height: 400px;
}

/* 오버플로우 숨김 */
.overflow-hidden {
    overflow: hidden !important;
}

.overflow-x-hidden {
    overflow-x: hidden !important;
}

.overflow-y-hidden {
    overflow-y: hidden !important;
}

/* ==============================================
   12. 반응형 미디어 쿼리
   ============================================== */

/* 태블릿 */
@media (max-width: 768px) {
    .table-responsive {
        border: 1px solid #dee2e6;
        border-radius: 0.25rem;
    }
    
    .modal-dialog {
        max-width: 95vw;
        margin: 1rem auto;
    }
    
    .card-title {
        font-size: 1.1rem;
    }
    
    /* 테이블을 카드 형식으로 변환 */
    .table-responsive table,
    .table-responsive thead,
    .table-responsive tbody,
    .table-responsive th,
    .table-responsive td,
    .table-responsive tr {
        display: block;
    }
    
    .table-responsive thead tr {
        position: absolute;
        top: -9999px;
        left: -9999px;
    }
    
    .table-responsive tr {
        border: 1px solid #ccc;
        margin-bottom: 10px;
    }
    
    .table-responsive td {
        border: none;
        position: relative;
        padding-left: 50%;
        white-space: normal;
        text-overflow: initial;
    }
    
    .table-responsive td:before {
        position: absolute;
        top: 6px;
        left: 6px;
        width: 45%;
        padding-right: 10px;
        white-space: nowrap;
        content: attr(data-label);
        font-weight: bold;
    }
}

/* 모바일 */
@media (max-width: 576px) {
    body {
        font-size: 14px;
    }
    
    .container {
        padding-left: 10px;
        padding-right: 10px;
    }
    
    .btn {
        padding: 0.375rem 0.5rem;
        font-size: 0.875rem;
    }
    
    .card {
        margin-bottom: 1rem;
    }
    
    .table-cell-long {
        max-width: 150px;
    }
    
    /* 네비게이션 스택 */
    .navbar-nav {
        flex-direction: column;
    }
    
    .nav-link {
        max-width: 100%;
    }
}

/* ==============================================
   13. 프린트 스타일
   ============================================== */

@media print {
    body {
        overflow: visible;
    }
    
    .table-responsive {
        overflow: visible;
    }
    
    .scrollable-x,
    .scrollable-y {
        overflow: visible;
        max-height: none;
    }
}

/* ==============================================
   14. 스크롤바 스타일링
   ============================================== */

/* Webkit 브라우저 */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #555;
}

/* Firefox */
* {
    scrollbar-width: thin;
    scrollbar-color: #888 #f1f1f1;
}

/* ==============================================
   15. 애니메이션 최적화
   ============================================== */

.overflow-transition {
    transition: max-height 0.3s ease-out, overflow 0.3s ease-out;
}

.expand-on-hover:hover {
    overflow: visible;
    z-index: 10;
    position: relative;
}

/* ==============================================
   16. 특수 컴포넌트
   ============================================== */

/* 대시보드 통계 카드 */
.stat-card {
    overflow: hidden;
    min-height: 100px;
}

.stat-value {
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    overflow: hidden;
    text-overflow: ellipsis;
}

/* 로그 뷰어 */
.log-viewer {
    overflow-y: auto;
    overflow-x: auto;
    max-height: 500px;
    font-family: monospace;
    white-space: pre;
    background: #1e1e1e;
    color: #d4d4d4;
    padding: 1rem;
}

/* 패킷 분석 테이블 */
.packet-table {
    font-size: 0.875rem;
}

.packet-table td {
    max-width: 150px;
    font-family: monospace;
}